<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>×¡×¤×™×¨×ª "×”×’×•××¨" ×œ×¨×¢×•×ª ×•××‘×™</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #dee2e6 100%);
    min-height: 100vh;
    color: #2c3e50;
    line-height: 1.6;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }

  /* Header with Wedding Logo Style */
  header {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    border-radius: 25px;
    padding: 35px 30px;
    margin-bottom: 30px;
    text-align: center;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    border: 2px solid #e9ecef;
    position: relative;
    overflow: hidden;
  }

  header::before {
    content: 'ğŸ’';
    position: absolute;
    top: 20px;
    right: 30px;
    font-size: 2rem;
    opacity: 0.3;
  }

  header::after {
    content: 'ğŸ’';
    position: absolute;
    top: 20px;
    left: 30px;
    font-size: 2rem;
    opacity: 0.3;
  }

  h1 {
    font-size: 2.2rem;
    color: #1a5f7a;
    margin-bottom: 12px;
    font-weight: 700;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    font-family: 'Poppins', 'Inter', 'Segoe UI', sans-serif;
    letter-spacing: -0.02em;
  }

  .wedding-date {
    font-size: 1rem;
    color: #6c757d;
    font-weight: 500;
    font-style: italic;
    margin-bottom: 20px;
    font-family: 'Inter', 'Segoe UI', sans-serif;
  }

  /* Progress Container integrated in header */
  .progress-container {
    margin-top: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
  }

  .progress-title {
    font-size: 1.1rem;
    color: #1a5f7a;
    font-weight: 600;
    font-family: 'Poppins', 'Inter', 'Segoe UI', sans-serif;
    white-space: nowrap;
    letter-spacing: -0.01em;
  }

  .progress-bar {
    background: #e9ecef;
    border-radius: 20px;
    height: 18px;
    overflow: hidden;
    border: 3px solid #dee2e6;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    width: 280px;
    flex-shrink: 0;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #1a5f7a, #2c88a0, #4a9bb8);
    border-radius: 20px;
    transition: width 1.5s ease;
    position: relative;
  }

  .progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    animation: shimmer 3s infinite;
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  /* Day Buttons Grid - Elegant Wedding Style */
  .days-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 18px;
    margin-bottom: 25px;
  }

  .day-button {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    border: 3px solid #e9ecef;
    border-radius: 18px;
    padding: 22px 18px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.4s ease;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    min-height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    font-family: 'Poppins', 'Inter', 'Segoe UI', sans-serif;
    position: relative;
    overflow: hidden;
    letter-spacing: -0.01em;
  }

  .day-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(26, 95, 122, 0.1), transparent);
    transition: left 0.6s ease;
  }

  .day-button:hover::before {
    left: 100%;
  }

  .day-button:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
    border-color: #1a5f7a;
  }

  .day-button.has-link {
    background: linear-gradient(135deg, #1a5f7a, #2c88a0);
    color: white;
    border-color: #1a5f7a;
    box-shadow: 0 10px 30px rgba(26, 95, 122, 0.3);
  }

  .day-button.has-link:hover {
    background: linear-gradient(135deg, #2c88a0, #4a9bb8);
    transform: translateY(-8px) scale(1.05);
    box-shadow: 0 20px 40px rgba(26, 95, 122, 0.4);
  }

  .day-button.no-link {
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
    color: #6c757d;
    cursor: not-allowed;
  }

  .day-button.no-link:hover {
    transform: none;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  }

  /* Admin Section - Elegant Design */
  .admin-section {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    border-radius: 25px;
    padding: 25px;
    text-align: center;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    border: 2px solid #e9ecef;
  }

  .admin-title {
    font-size: 1.3rem;
    color: #1a5f7a;
    margin-bottom: 20px;
    font-weight: 600;
    font-family: 'Poppins', 'Inter', 'Segoe UI', sans-serif;
    letter-spacing: -0.01em;
  }

  .admin-form {
    display: flex;
    gap: 20px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
  }

  .admin-input {
    padding: 15px 20px;
    border: 2px solid #e9ecef;
    border-radius: 15px;
    font-size: 1rem;
    transition: all 0.3s ease;
    min-width: 220px;
    font-family: 'Inter', 'Segoe UI', sans-serif;
  }

  .admin-input:focus {
    outline: none;
    border-color: #1a5f7a;
    box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
    transform: translateY(-2px);
  }

  .admin-button {
    background: linear-gradient(135deg, #1a5f7a, #2c88a0);
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 15px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Inter', 'Segoe UI', sans-serif;
  }

  .admin-button:hover {
    background: linear-gradient(135deg, #2c88a0, #4a9bb8);
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(26, 95, 122, 0.3);
  }

  /* Toolbar - Wedding Elegance */
  .toolbar {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    border-radius: 25px;
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    border: 2px solid #e9ecef;
    display: none;
  }

  .toolbar-title {
    font-size: 1.5rem;
    color: #1a5f7a;
    margin-bottom: 20px;
    text-align: center;
    font-weight: 600;
    font-family: 'Poppins', 'Inter', 'Segoe UI', sans-serif;
    letter-spacing: -0.01em;
  }

  .toolbar-inputs {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 25px;
  }

  .toolbar-input {
    padding: 18px 20px;
    border: 2px solid #e9ecef;
    border-radius: 15px;
    font-size: 1rem;
    transition: all 0.3s ease;
    font-family: 'Inter', 'Segoe UI', sans-serif;
  }

  .toolbar-input:focus {
    outline: none;
    border-color: #1a5f7a;
    box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
    transform: translateY(-2px);
  }

  .toolbar-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .toolbar-button {
    padding: 18px 35px;
    border: none;
    border-radius: 15px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 160px;
    font-family: 'Inter', 'Segoe UI', sans-serif;
  }

  .toolbar-button.save {
    background: linear-gradient(135deg, #1a5f7a, #2c88a0);
    color: white;
  }

  .toolbar-button.open {
    background: linear-gradient(135deg, #2c88a0, #4a9bb8);
    color: white;
  }

  .toolbar-button.logout {
    background: linear-gradient(135deg, #dc3545, #c82333);
    color: white;
  }

  .toolbar-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  }

  .toolbar-tip {
    text-align: center;
    margin-top: 25px;
    color: #6c757d;
    font-size: 0.95rem;
    font-style: italic;
    font-family: 'Inter', 'Segoe UI', sans-serif;
  }

  .toolbar-tip code {
    background: #f8f9fa;
    padding: 6px 10px;
    border-radius: 8px;
    font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
    color: #1a5f7a;
    border: 1px solid #e9ecef;
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .container {
      padding: 15px;
    }
    
    /* Mobile Header */
    header {
      padding: 25px 20px;
      margin-bottom: 20px;
      border-radius: 20px;
    }
    
    h1 {
      font-size: 1.8rem;
      margin-bottom: 10px;
    }
    
    .wedding-date {
      font-size: 0.9rem;
      margin-bottom: 15px;
    }
    
    .progress-container {
      margin-top: 12px;
      gap: 15px;
    }
    
    .progress-title {
      font-size: 1rem;
    }
    
    .progress-bar {
      width: 200px;
      height: 16px;
    }
    
    /* Mobile Grid - 3 columns for better mobile experience */
    .days-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .day-button {
      padding: 18px 12px;
      font-size: 1rem;
      min-height: 70px;
      border-radius: 15px;
    }
    
    /* Mobile Admin Section */
    .admin-section {
      padding: 20px;
      border-radius: 20px;
    }
    
    .admin-title {
      font-size: 1.1rem;
      margin-bottom: 15px;
    }
    
    .admin-form {
      flex-direction: column;
      gap: 15px;
    }
    
    .admin-input {
      min-width: 100%;
      padding: 12px 15px;
    }
    
    .admin-button {
      padding: 12px 25px;
      width: 100%;
    }
    
    /* Mobile Toolbar */
    .toolbar {
      padding: 20px;
      border-radius: 20px;
      margin-bottom: 20px;
    }
    
    .toolbar-title {
      font-size: 1.3rem;
      margin-bottom: 15px;
    }
    
    .toolbar-inputs {
      grid-template-columns: 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .toolbar-input {
      padding: 15px;
    }
    
    .toolbar-buttons {
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }
    
    .toolbar-button {
      padding: 15px 25px;
      min-width: 100%;
    }
    
    .toolbar-tip {
      font-size: 0.85rem;
      margin-top: 20px;
    }
  }

  /* Desktop-specific optimizations */
  @media (min-width: 769px) {
    .container {
      padding: 25px;
    }
    
    /* Desktop Grid - 6 columns for better desktop experience */
    .days-grid {
      grid-template-columns: repeat(6, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .day-button {
      padding: 25px 20px;
      font-size: 1.2rem;
      min-height: 90px;
      border-radius: 20px;
    }
    
    /* Desktop Header */
    header {
      padding: 40px 35px;
      margin-bottom: 35px;
    }
    
    h1 {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }
    
    .wedding-date {
      font-size: 1.1rem;
      margin-bottom: 25px;
    }
    
    .progress-container {
      margin-top: 20px;
      gap: 25px;
    }
    
    .progress-title {
      font-size: 1.2rem;
    }
    
    .progress-bar {
      width: 320px;
      height: 20px;
    }
    
    /* Desktop Admin Section */
    .admin-section {
      padding: 30px;
    }
    
    .admin-title {
      font-size: 1.4rem;
      margin-bottom: 25px;
    }
    
    .admin-form {
      gap: 25px;
    }
    
    .admin-input {
      min-width: 250px;
      padding: 18px 22px;
    }
    
    .admin-button {
      padding: 18px 35px;
    }
    
    /* Desktop Toolbar */
    .toolbar {
      padding: 30px;
      margin-bottom: 30px;
    }
    
    .toolbar-title {
      font-size: 1.6rem;
      margin-bottom: 25px;
    }
    
    .toolbar-inputs {
      grid-template-columns: repeat(2, 1fr);
      gap: 25px;
      margin-bottom: 25px;
    }
    
    .toolbar-input {
      padding: 20px 25px;
    }
    
    .toolbar-buttons {
      gap: 25px;
    }
    
    .toolbar-button {
      padding: 20px 40px;
      min-width: 180px;
    }
  }

  /* Large Desktop (1200px+) - Extra wide layout */
  @media (min-width: 1200px) {
    .container {
      max-width: 1400px;
      padding: 30px;
    }
    
    .days-grid {
      grid-template-columns: repeat(7, 1fr);
      gap: 25px;
    }
    
    .day-button {
      padding: 28px 22px;
      font-size: 1.3rem;
      min-height: 95px;
    }
    
    header {
      padding: 45px 40px;
    }
    
    h1 {
      font-size: 2.8rem;
    }
    
    .progress-bar {
      width: 350px;
      height: 22px;
    }
  }

  /* Extra Small Mobile (320px-480px) */
  @media (max-width: 480px) {
    .container {
      padding: 10px;
    }
    
    header {
      padding: 20px 15px;
      border-radius: 15px;
    }
    
    h1 {
      font-size: 1.5rem;
    }
    
    .wedding-date {
      font-size: 0.8rem;
    }
    
    .days-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }
    
    .day-button {
      padding: 15px 10px;
      font-size: 0.9rem;
      min-height: 60px;
      border-radius: 12px;
    }
    
    .progress-bar {
      width: 150px;
      height: 14px;
    }
    
    .progress-title {
      font-size: 0.9rem;
    }
  }
</style>
</head>
<body>
  <div class="container">
    <!-- Combined Header with Progress -->
    <header>
      <h1 id="dynamicTitle">×¡×¤×™×¨×ª "×”×’×•××¨" ×œ×¨×¢×•×ª ×•××‘×™</h1>
             <div class="wedding-date">10 ×‘×¡×¤×˜××‘×¨ 2025 â€¢ ğŸ’</div>
      
      <!-- Progress Bar integrated into header -->
      <div class="progress-container">
        <h3 class="progress-title">×”×ª×§×“××•×ª ×¡×¤×™×¨×ª ×”×’×•××¨</h3>
        <div class="progress-bar">
          <div id="progressFill" class="progress-fill"></div>
        </div>
      </div>
    </header>

    <!-- Admin Toolbar (Hidden by default) -->
    <div id="toolbar" class="toolbar">
      <h3 class="toolbar-title">ğŸ¬ ×›×œ×™ × ×•×—×•×ª - ×”×•×¡×¤×ª ×¡×¨×˜×•× ×™× (×× ×”×œ ×‘×œ×‘×“)</h3>
      
      <div class="toolbar-inputs">
        <input id="linkInput" type="url" class="toolbar-input" placeholder="×”×“×‘×™×§×™ ×›××Ÿ ×œ×™× ×§ ×œ×¡×¨×˜×•×Ÿ (https://...)" />
        <input id="dayInput" type="number" min="1" max="29" class="toolbar-input" placeholder="×™×•× (1â€“29)" />
      </div>
      
      <div class="toolbar-buttons">
        <button id="saveBtn" class="toolbar-button save">ğŸ’¾ ×©××¨×™ ×œ×™× ×§ ×œ×™×•×</button>
        <button id="openBtn" class="toolbar-button open">â–¶ï¸ ×¤×ª×—×™ ××ª ×”×¡×¨×˜×•×Ÿ</button>
        <button onclick="logoutAdmin()" class="toolbar-button logout">ğŸšª ×”×ª× ×ª×§×™</button>
      </div>
      
      <p class="toolbar-tip">
        ğŸ’¡ ×˜×™×¤: ××¤×©×¨ ×œ×¤×ª×•×— ×™×©×™×¨×•×ª ×™×•× ××¡×•×™× ×¢× <code>?day=7</code> ×‘×¡×•×£ ×”×›×ª×•×‘×ª
      </p>
    </div>

    <!-- Day Buttons Grid -->
    <div id="grid" class="days-grid" aria-live="polite"></div>

    <!-- Admin Login -->
    <div id="adminLogin" class="admin-section">
      <h4 class="admin-title">ğŸ” ×›× ×™×¡×ª ×× ×”×œ</h4>
      <div class="admin-form">
        <input type="password" id="adminPassword" class="admin-input" placeholder="×¡×™×¡××”" />
        <button onclick="loginAdmin()" class="admin-button">×”×ª×—×‘×¨×™</button>
      </div>
    </div>
  </div>

  <script>
     // Device detection and responsive classes
     function detectDevice() {
       const isMobile = window.innerWidth <= 768;
       const isTablet = window.innerWidth > 768 && window.innerWidth <= 1024;
       const isDesktop = window.innerWidth > 1024;
       
       document.body.classList.remove('mobile', 'tablet', 'desktop');
       
       if (isMobile) {
         document.body.classList.add('mobile');
       } else if (isTablet) {
         document.body.classList.add('tablet');
       } else {
         document.body.classList.add('desktop');
       }
       
       // Update grid columns dynamically for better responsiveness
       const grid = document.getElementById('grid');
       if (grid) {
         if (isMobile) {
           if (window.innerWidth <= 480) {
             grid.style.gridTemplateColumns = 'repeat(2, 1fr)';
           } else {
             grid.style.gridTemplateColumns = 'repeat(3, 1fr)';
           }
         } else if (isTablet) {
           grid.style.gridTemplateColumns = 'repeat(4, 1fr)';
         } else if (isDesktop) {
           if (window.innerWidth >= 1200) {
             grid.style.gridTemplateColumns = 'repeat(7, 1fr)';
           } else {
             grid.style.gridTemplateColumns = 'repeat(6, 1fr)';
           }
         }
       }
     }
     
     // Run on page load and resize
     window.addEventListener('load', detectDevice);
     window.addEventListener('resize', detectDevice);
     
     /**
      * ××™×š ××¢×“×›× ×™× ×§×™×©×•×¨×™×?
      * 1) ×©×™××™ ×›××Ÿ ××ª ×”×œ×™× ×§×™× ×œ×¤×™ ××™× ×“×§×¡ (0=×™×•×1, 28=×™×•×29), ××•:
      * 2) ×”×©×ª××©×™ ×‘×ª×™×‘×ª ×”×›×œ×™× ×œ××¢×œ×” ×›×“×™ ×œ×”×“×‘×™×§ ×œ×™× ×§ ×•×œ×©××•×¨ ×œ×™×•× ××¡×•×™×.
      *
      * ×‘×¨×™×¨×ª ××—×“×œ: null = ××™×Ÿ ×œ×™× ×§ ×¢×“×™×™×Ÿ (×”×›×¤×ª×•×¨ ×™×”×™×” "××¤×•×¨").
      */
     const DEFAULT_LINKS = [
       /* ×™×•× 1  */ null,
       /* ×™×•× 2  */ null,
       /* ×™×•× 3  */ null,
       /* ×™×•× 4  */ null,
       /* ×™×•× 5  */ null,
       /* ×™×•× 6  */ null,
       /* ×™×•× 7  */ null,
       /* ×™×•× 8  */ null,
       /* ×™×•× 9  */ null,
       /* ×™×•× 10 */ null,
       /* ×™×•× 11 */ null,
       /* ×™×•× 12 */ null,
       /* ×™×•× 13 */ null,
       /* ×™×•× 14 */ null,
       /* ×™×•× 15 */ null,
       /* ×™×•× 16 */ null,
       /* ×™×•× 17 */ null,
       /* ×™×•× 18 */ null,
       /* ×™×•× 19 */ null,
       /* ×™×•× 20 */ null,
       /* ×™×•× 21 */ null,
       /* ×™×•× 22 */ null,
       /* ×™×•× 23 */ null,
       /* ×™×•× 24 */ null,
       /* ×™×•× 25 */ null,
       /* ×™×•× 26 */ null,
       /* ×™×•× 27 */ null,
       /* ×™×•× 28 */ null,
       /* ×™×•× 29 */ null
     ];
     
           // Data management - Load from JSON file and save to localStorage as backup
      const DATA_FILE = "data.json";
      const STORAGE_KEY = "reut_avi_omer_links_v3";
      const ADMIN_PASSWORD = "reut2025"; // ×¡×™×¡××” ××¢×•×“×›× ×ª
      const ADMIN_KEY = "admin_logged_in";
      const WEDDING_DATE = new Date('2025-09-10');
      
      let isAdminLoggedIn = false;
      let links = [];
      let dataLoaded = false;
      
      // Load data from JSON file
      async function loadDataFromFile() {
        try {
          const response = await fetch(DATA_FILE);
          if (response.ok) {
            const data = await response.json();
            links = data.video_links.map(item => item.url);
            dataLoaded = true;
            console.log('Data loaded from JSON file:', links);
          } else {
            throw new Error('Failed to load data file');
          }
        } catch (error) {
          console.log('Loading from localStorage backup...');
          loadLinksFromStorage();
        }
      }
      
      // Load links from localStorage as backup
      function loadLinksFromStorage() {
        try {
          const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || "null");
          if (Array.isArray(saved) && saved.length === 29) {
            links = saved;
            console.log('Data loaded from localStorage backup:', links);
          } else {
            links = [...DEFAULT_LINKS];
            console.log('Using default links:', links);
          }
        } catch (e) {
          links = [...DEFAULT_LINKS];
          console.log('Error loading from localStorage, using defaults:', links);
        }
        dataLoaded = true;
      }
      
      // Save links to localStorage as backup
      function saveLinksToStorage(arr) {
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
          console.log('Data saved to localStorage backup');
        } catch (e) {
          console.error('Error saving to localStorage:', e);
        }
      }
      
      // Calculate days until wedding
      function getDaysUntilWedding() {
        const today = new Date();
        const timeDiff = WEDDING_DATE.getTime() - today.getTime();
        const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
        return Math.max(0, daysDiff);
      }
      
      // Update dynamic title and countdown
      function updateDynamicContent() {
        if (!dataLoaded) return;
        
        const daysUntilWedding = getDaysUntilWedding();
        const completedDays = links.filter(link => link !== null).length;
        const remainingDays = 29 - completedDays;
        
        console.log('Debug - completedDays:', completedDays, 'remainingDays:', remainingDays);
        
        // Update page title - show remaining days to add videos
        document.title = `×¡×¤×™×¨×ª "×”×’×•××¨" ×œ×¨×¢×•×ª ×•××‘×™ - ${remainingDays} ×™××™× × ×•×ª×¨×• ×œ×”×•×¡×¤×”`;
        
        // Update main title - show remaining days to add videos
        const dynamicTitle = document.getElementById('dynamicTitle');
        if (dynamicTitle) {
          dynamicTitle.textContent = `×¡×¤×™×¨×ª "×”×’×•××¨" ×œ×¨×¢×•×ª ×•××‘×™ - ${remainingDays} ×™××™× × ×•×ª×¨×• ×œ×”×•×¡×¤×”`;
        }
      }
      
      // Check if admin is already logged in
      function checkAdminStatus() {
        const adminStatus = localStorage.getItem(ADMIN_KEY);
        if (adminStatus === "true") {
          isAdminLoggedIn = true;
          showAdminInterface();
        }
      }
      
      // Login function
      function loginAdmin() {
        const password = document.getElementById('adminPassword').value;
        if (password === ADMIN_PASSWORD) {
          isAdminLoggedIn = true;
          localStorage.setItem(ADMIN_KEY, "true");
          showAdminInterface();
          document.getElementById('adminPassword').value = '';
        } else {
          alert('âŒ ×¡×™×¡××” ×©×’×•×™×”! × ×¡×™ ×©×•×‘.');
        }
      }
      
      // Logout function
      function logoutAdmin() {
        isAdminLoggedIn = false;
        localStorage.removeItem(ADMIN_KEY);
        hideAdminInterface();
      }
      
      // Show admin interface
      function showAdminInterface() {
        document.getElementById('adminLogin').style.display = 'none';
        document.getElementById('toolbar').style.display = 'block';
      }
      
      // Hide admin interface
      function hideAdminInterface() {
        document.getElementById('adminLogin').style.display = 'block';
        document.getElementById('toolbar').style.display = 'none';
      }
      
      function updateProgress() {
        if (!dataLoaded) return;
        
        const progressFill = document.getElementById('progressFill');
        const completedDays = links.filter(link => link !== null).length;
        const percentage = (completedDays / 29) * 100;
        progressFill.style.width = percentage + '%';
      }
     
     // ×‘× ×™×™×ª ×›×¤×ª×•×¨×™×
     const grid = document.getElementById('grid');
     
           function render(){
        if (!dataLoaded) return;
        
        grid.innerHTML = "";
        for (let i=0;i<29;i++){
          const btn = document.createElement('button');
          const has = typeof links[i] === 'string' && links[i].trim().length>0;
          
          btn.className = has ? 'day-button has-link' : 'day-button no-link';
          btn.textContent = `×™×•× ${i+1}`;
          btn.dataset.haslink = has ? "true" : "false";
          btn.title = has ? '×¤×ª×—×™ ××ª ×”×¡×¨×˜×•×Ÿ' : '×¢×“×™×™×Ÿ ××™×Ÿ ×œ×™× ×§ ×œ×™×•× ×”×–×”';
          
          // Add special styling for current day
          const today = new Date();
          const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
          const omerStart = 78; // Approximate start of Omer
          const currentOmerDay = dayOfYear - omerStart + 1;
          
          if (i + 1 === currentOmerDay) {
            btn.style.borderColor = '#f6ad55';
            btn.style.boxShadow = '0 0 25px rgba(246, 173, 85, 0.6)';
            btn.style.background = 'linear-gradient(135deg, #f6ad55, #f0933b)';
            btn.style.color = 'white';
          }
          
          btn.addEventListener('click', () => {
            if (!has) return;
            window.open(links[i], '_blank', 'noopener');
          });
          
          grid.appendChild(btn);
        }
        updateProgress();
        updateDynamicContent(); // Update title and countdown after rendering
      }
      
      // Initialize the website
      async function initializeWebsite() {
        await loadDataFromFile();
        render();
        checkAdminStatus();
        updateDynamicContent();
      }
      
            // Start the website when page loads
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeWebsite);
      } else {
        initializeWebsite();
      }
      
      // Function to update the data file (for admin use)
      function updateDataFile(day, url) {
        // Note: In a real web environment, this would update the server file
        // For now, we'll just log the update and save to localStorage
        console.log(`Updating day ${day} with URL: ${url}`);
        
        // In a real implementation, you would send this to your server
        // For GitHub Pages, you'll need to manually update the data.json file
        // or use a service like Netlify Functions or GitHub Actions
        
        // For now, we'll create a downloadable updated data file
        const updatedData = {
          wedding_date: "2025-09-10",
          last_updated: new Date().toISOString().split('T')[0],
          video_links: links.map((link, index) => ({
            day: index + 1,
            url: link,
            title: `×™×•× ${index + 1}`,
            added_date: link ? new Date().toISOString().split('T')[0] : null
          })),
          admin_password: "reut2025",
          version: "1.0"
        };
        
        // Create downloadable file
        const dataStr = JSON.stringify(updatedData, null, 2);
        const dataBlob = new Blob([dataStr], {type: 'application/json'});
        const url2 = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url2;
        link.download = 'updated_data.json';
        link.textContent = 'ğŸ“¥ Download Updated Data File';
        link.style.display = 'block';
        link.style.margin = '20px auto';
        link.style.padding = '15px 25px';
        link.style.backgroundColor = '#1a5f7a';
        link.style.color = 'white';
        link.style.textDecoration = 'none';
        link.style.borderRadius = '10px';
        link.style.textAlign = 'center';
        link.style.maxWidth = '300px';
        
        // Add download link to the page temporarily
        const container = document.querySelector('.container');
        const existingLink = container.querySelector('a[download]');
        if (existingLink) {
          existingLink.remove();
        }
        container.appendChild(link);
        
        // Remove after 10 seconds
        setTimeout(() => {
          if (link.parentNode) {
            link.parentNode.removeChild(link);
          }
        }, 10000);
      }
      
      // ×¡×¨×’×œ ×¢×–×¨ ×œ××¢×œ×”
     const linkInput = document.getElementById('linkInput');
     const dayInput  = document.getElementById('dayInput');
     const saveBtn   = document.getElementById('saveBtn');
     const openBtn   = document.getElementById('openBtn');
     
     saveBtn.addEventListener('click', () => {
       if (!isAdminLoggedIn) {
         alert('âŒ ×¨×§ ×× ×”×œ ×™×›×•×œ ×œ×¢×“×›×Ÿ ×§×™×©×•×¨×™×!');
         return;
       }
       
       const day = Number(dayInput.value);
       const url = String(linkInput.value || "").trim();
       
       if (!day || day < 1 || day > 29){ 
         alert('× × ×œ×‘×—×•×¨ ×™×•× ×‘×™×Ÿ 1 ×œâ€‘29'); 
         return; 
       }
       
       if (!url || !/^https?:\/\//.test(url)){ 
         alert('× × ×œ×”×“×‘×™×§ ×œ×™× ×§ ×—×•×§×™ ×©××ª×—×™×œ ×‘â€‘https://'); 
         return; 
       }
       
               links[day-1] = url;
        
        // Save to localStorage as backup
        saveLinksToStorage(links);
        
        // Update the JSON data structure
        updateDataFile(day, url);
        
        render();
        
        // Clear inputs and show success
        linkInput.value = '';
        dayInput.value = '';
        
        // Animate the saved button
        const savedButton = grid.children[day-1];
        savedButton.style.transform = 'scale(1.1)';
        setTimeout(() => {
          savedButton.style.transform = '';
        }, 300);
        
        alert(`ğŸ‰ × ×©××¨ ×œ×™× ×§ ×œ×™×•× ${day}!`);
     });
     
     openBtn.addEventListener('click', () => {
       const day = Number(dayInput.value);
       if (!day || day < 1 || day > 29){ 
         alert('× × ×œ×‘×—×•×¨ ×™×•× ×‘×™×Ÿ 1 ×œâ€‘29'); 
         return; 
       }
       
       const url = links[day-1];
       if (!url){ 
         alert('××™×Ÿ ×œ×™× ×§ ×œ×™×•× ×”×–×” ×¢×“×™×™×Ÿ'); 
         return; 
       }
       
       window.open(url, '_blank', 'noopener');
     });
     
     // ×ª××™×›×” ×‘â€‘?day=7 ×œ×¤×ª×™×—×” ×™×©×™×¨×”
     const params = new URLSearchParams(location.search);
     const paramDay = Number(params.get('day'));
     if (paramDay && paramDay >=1 && paramDay <=29){
       const url = links[paramDay-1];
       if (url) window.open(url, '_blank', 'noopener');
     }
     
     // Add some interactive effects
     document.addEventListener('DOMContentLoaded', function() {
       // Animate buttons on page load
       const buttons = document.querySelectorAll('.day-button');
       buttons.forEach((btn, index) => {
         btn.style.opacity = '0';
         btn.style.transform = 'translateY(20px)';
         setTimeout(() => {
           btn.style.transition = 'all 0.6s ease';
           btn.style.opacity = '1';
           btn.style.transform = 'translateY(0)';
         }, index * 50);
       });
     });
  </script>
</body>
</html>
